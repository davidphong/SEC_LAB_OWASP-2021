{% extends "base.html" %}

{% block title %}Security Lab - Nền tảng chia sẻ kiến thức an ninh mạng{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero Banner -->
    <div class="banner-container mb-5">
        <div class="row">
            <div class="col-12">
                <div class="hero-banner">
                    <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="An ninh mạng" class="img-fluid w-100 rounded" style="max-height: 350px; object-fit: contain; background-color: #003366;">
                    <div class="banner-content">
                        <h1 class="display-4 text-white">Kiến thức An ninh mạng</h1>
                        <p class="lead text-white">Chia sẻ và nâng cao hiểu biết về an toàn thông tin tại Việt Nam</p>
                        <a href="{{ url_for('blog_list') }}" class="btn btn-light btn-lg mt-3">Xem tất cả bài viết</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Latest Blog Posts -->
    {% if latest_posts %}
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="section-title text-navy">Bài viết mới nhất</h2>
        </div>
    </div>

    <div class="row mb-5">
        <!-- Featured Post (most recent) -->
        <div class="col-lg-6 mb-4">
            <div class="card featured-post h-100">
                <img src="{{ url_for('static', filename=latest_posts[0].image_path) }}" class="card-img-top" alt="{{ latest_posts[0].title }}" style="height: 250px; object-fit: cover;">
                <div class="card-body">
                    <div class="tags mb-2">
                        <span class="badge bg-navy-soft">{{ latest_posts[0].category }}</span>
                    </div>
                    <h3 class="card-title">{{ latest_posts[0].title }}</h3>
                    <p class="card-text">{{ latest_posts[0].summary }}</p>
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <div class="author d-flex align-items-center">
                            <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="Author" class="rounded-circle me-2" width="30" height="30" style="background-color: #003366;">
                            <span>{{ latest_posts[0].author.username }}</span>
                        </div>
                        <small class="text-muted">{{ latest_posts[0].created_at.strftime('%d/%m/%Y') }}</small>
                    </div>
                    <div class="mt-3">
                        <a href="{{ url_for('blog_detail', post_id=latest_posts[0].id) }}" class="btn btn-primary">Đọc thêm</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other Latest Posts -->
        <div class="col-lg-6">
            <div class="row">
                {% for post in latest_posts[1:] %}
                <div class="col-12 mb-3">
                    <div class="card small-post">
                        <div class="row g-0">
                            <div class="col-4">
                                <img src="{{ url_for('static', filename=post.image_path) }}" class="img-fluid rounded-start" alt="{{ post.title }}" style="height: 100%; object-fit: cover;">
                            </div>
                            <div class="col-8">
                                <div class="card-body">
                                    <div class="tags mb-1">
                                        <span class="badge bg-navy-soft">{{ post.category }}</span>
                                    </div>
                                    <h5 class="card-title">{{ post.title }}</h5>
                                    <div class="d-flex justify-content-between align-items-center mt-2">
                                        <div class="author d-flex align-items-center">
                                            <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="Author" class="rounded-circle me-1" width="24" height="24" style="background-color: #003366;">
                                            <small>{{ post.author.username }}</small>
                                        </div>
                                        <small class="text-muted">{{ post.created_at.strftime('%d/%m/%Y') }}</small>
                                    </div>
                                    <div class="mt-2">
                                        <a href="{{ url_for('blog_detail', post_id=post.id) }}" class="btn btn-sm btn-outline-primary">Đọc thêm</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Featured Articles -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="section-title text-navy">Bài viết nổi bật</h2>
        </div>
    </div>

    <div class="row mb-5">
        <!-- Featured Post -->
        <div class="col-lg-6 mb-4">
            <div class="card featured-post h-100">
                <img src="{{ url_for('static', filename='desgined/des3.png') }}" class="card-img-top" alt="Featured Post" style="height: 250px; object-fit: cover;">
                <div class="card-body">
                    <div class="tags mb-2">
                        <span class="badge bg-navy-soft">Bảo mật</span>
                        <span class="badge bg-skyblue-soft">Phân tích</span>
                    </div>
                    <h3 class="card-title">Phân tích lỗ hổng Zero-day mới được phát hiện trong hệ thống quản lý mạng</h3>
                    <p class="card-text">Cách thức hoạt động, phương pháp khai thác và giải pháp bảo vệ doanh nghiệp trước các cuộc tấn công mới.</p>
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <div class="author d-flex align-items-center">
                            <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="Author" class="rounded-circle me-2" width="30" height="30" style="background-color: #003366;">
                            <span>Nguyễn Văn An</span>
                        </div>
                        <small class="text-muted">3 ngày trước</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other Featured Posts -->
        <div class="col-lg-6">
            <div class="row">
                <div class="col-12 mb-3">
                    <div class="card small-post">
                        <div class="row g-0">
                            <div class="col-4">
                                <img src="{{ url_for('static', filename='desgined/des1.png') }}" class="img-fluid rounded-start" alt="Post" style="height: 100%; object-fit: cover;">
                            </div>
                            <div class="col-8">
                                <div class="card-body">
                                    <div class="tags mb-1">
                                        <span class="badge bg-navy-soft">Hacking</span>
                                    </div>
                                    <h5 class="card-title">Chiến thuật tấn công mạng phổ biến năm 2023</h5>
                                    <div class="d-flex justify-content-between align-items-center mt-2">
                                        <div class="author d-flex align-items-center">
                                            <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="Author" class="rounded-circle me-1" width="24" height="24" style="background-color: #003366;">
                                            <small>Trần Minh Đức</small>
                                        </div>
                                        <small class="text-muted">1 tuần trước</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 mb-3">
                    <div class="card small-post">
                        <div class="row g-0">
                            <div class="col-4">
                                <img src="{{ url_for('static', filename='desgined/des4.png') }}" class="img-fluid rounded-start" alt="Post" style="height: 100%; object-fit: cover;">
                            </div>
                            <div class="col-8">
                                <div class="card-body">
                                    <div class="tags mb-1">
                                        <span class="badge bg-skyblue-soft">CTF</span>
                                    </div>
                                    <h5 class="card-title">Write-up: Security CTF Challenge 2023</h5>
                                    <div class="d-flex justify-content-between align-items-center mt-2">
                                        <div class="author d-flex align-items-center">
                                            <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="Author" class="rounded-circle me-1" width="24" height="24" style="background-color: #003366;">
                                            <small>Lê Thị Hương</small>
                                        </div>
                                        <small class="text-muted">2 tuần trước</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <div class="card small-post">
                        <div class="row g-0">
                            <div class="col-4">
                                <img src="{{ url_for('static', filename='desgined/des2.jpg') }}" class="img-fluid rounded-start" alt="Post" style="height: 100%; object-fit: cover;">
                            </div>
                            <div class="col-8">
                                <div class="card-body">
                                    <div class="tags mb-1">
                                        <span class="badge bg-skyblue-soft">Công nghệ</span>
                                    </div>
                                    <h5 class="card-title">Ứng dụng AI trong bảo mật thông tin doanh nghiệp</h5>
                                    <div class="d-flex justify-content-between align-items-center mt-2">
                                        <div class="author d-flex align-items-center">
                                            <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="Author" class="rounded-circle me-1" width="24" height="24" style="background-color: #003366;">
                                            <small>Phạm Quang Huy</small>
                                        </div>
                                        <small class="text-muted">3 tuần trước</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Latest Articles -->
    <div class="row mb-4">
        <div class="col-md-8">
            <h2 class="section-title text-navy">Chủ đề nổi bật</h2>
            
            <!-- Article List -->
            <div class="article-list">
                {% for i in range(5) %}
                <div class="card article-card mb-4">
                    <div class="row g-0">
                        <div class="col-md-4">
                            <img src="{{ url_for('static', filename='desgined/des' ~ ((i % 4) + 1) ~ '.png' if i % 4 != 1 else 'desgined/des2.jpg') }}" class="img-fluid rounded-start" alt="Article" style="height: 100%; object-fit: cover;">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <div class="tags mb-2">
                                    <span class="badge bg-{{ ['navy', 'skyblue', 'navy', 'skyblue', 'navy'][i % 5] }}-soft">{{ ['Bảo mật', 'Hacking', 'Công nghệ', 'CTF', 'Tin tức'][i % 5] }}</span>
                                </div>
                                <h4 class="card-title">{{ ['Hướng dẫn bảo mật cơ bản cho người dùng', 'Phương pháp phòng chống Ransomware', 'Bảo mật IoT trong thời đại 4.0', 'Các tip bảo mật thông tin cá nhân', 'Mối đe dọa từ các nhóm APT năm 2023'][i % 5] }}</h4>
                                <p class="card-text">{{ ['Những nguyên tắc cơ bản giúp người dùng bảo vệ dữ liệu cá nhân và tài khoản trực tuyến một cách hiệu quả.', 'Cách nhận diện và phòng tránh các cuộc tấn công Ransomware đang gia tăng trong thời gian gần đây.', 'Các giải pháp bảo vệ thiết bị IoT trong hệ thống doanh nghiệp và gia đình.', 'Những bí quyết đơn giản nhưng hiệu quả giúp bảo vệ thông tin cá nhân trên không gian mạng.', 'Báo cáo về hoạt động của các nhóm APT (Advanced Persistent Threat) và mục tiêu nhắm đến.'][i % 5] }}</p>
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <div class="author d-flex align-items-center">
                                        <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="Author" class="rounded-circle me-2" width="30" height="30" style="background-color: #003366;">
                                        <span>{{ ['Nguyễn Văn An', 'Trần Minh Đức', 'Lê Thị Hương', 'Phạm Quang Huy', 'Vũ Thị Mai'][i % 5] }}</span>
                                    </div>
                                    <small class="text-muted">{{ i+1 }} ngày trước</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                
                <div class="text-center mt-4">
                    <a href="{{ url_for('blog_list') }}" class="btn btn-outline-navy px-4">Xem thêm</a>
                </div>
            </div>
        </div>
        
        <!-- Sidebar -->
        <div class="col-md-4">
            <!-- Popular Tags -->
            <div class="card mb-4">
                <div class="card-header bg-navy text-white">
                    <h5 class="mb-0">Chủ đề phổ biến</h5>
                </div>
                <div class="card-body">
                    <div class="popular-tags">
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">Bảo mật</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">Hacking</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">CTF</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">Ransomware</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">Phishing</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">Malware</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">Blockchain</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">Zero-day</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">OWASP</a>
                        <a href="#" class="btn btn-sm btn-skyblue-light mb-2 me-2">Bug Bounty</a>
                    </div>
                </div>
            </div>
            
            <!-- Popular Authors -->
            <div class="card mb-4">
                <div class="card-header bg-skyblue text-white">
                    <h5 class="mb-0">Tác giả hàng đầu</h5>
                </div>
                <div class="card-body p-0">
                    <ul class="list-group list-group-flush">
                        {% for i in range(5) %}
                        <li class="list-group-item">
                            <div class="d-flex align-items-center">
                                <img src="{{ url_for('static', filename='images/logo-amban-white.png') }}" alt="Author" class="rounded-circle me-3" width="40" height="40" style="background-color: #003366;">
                                <div>
                                    <h6 class="mb-0">{{ ['Nguyễn Văn An', 'Trần Minh Đức', 'Lê Thị Hương', 'Phạm Quang Huy', 'Vũ Thị Mai'][i] }}</h6>
                                    <small class="text-muted">{{ [24, 18, 15, 12, 10][i] }} bài viết</small>
                                </div>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            
            <!-- Newsletter -->
            <div class="card">
                <div class="card-header bg-navy text-white">
                    <h5 class="mb-0">Đăng ký nhận bản tin</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Nhận thông tin mới nhất về an ninh mạng và bảo mật thông tin</p>
                    <form>
                        <div class="mb-3">
                            <input type="email" class="form-control" placeholder="Email của bạn">
                        </div>
                        <button type="submit" class="btn btn-skyblue w-100">Đăng ký</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
